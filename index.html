<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مولد بطاقة الانتخاب</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            background: #eee;
            font-family: 'Arial', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            background: #fff;
            padding: 25px;
            border-radius: 20px;
            width: 90%;
            max-width: 1200px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .inputs {
            margin-bottom: 25px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        input {
            padding: 12px;
            font-size: 18px;
            border: 2px solid #ccc;
            border-radius: 10px;
        }

        .preview-box {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        canvas {
            width: 100%;
            max-width: 900px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .downloadBtn {
            background: linear-gradient(135deg, #4f46e5, #6d28d9);
            color: #fff;
            padding: 14px 26px;
            font-size: 20px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            transition: 0.3s;
        }

        .downloadBtn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .inputs {
                grid-template-columns: 1fr;
            }
        }
    </style>

</head>
<body>

<div class="container">
    <h1>مولد بطاقة الانتخاب | برمجة مهندس محمد حماد</h1>

    <div class="inputs">
        <input type="text" id="name" placeholder="اسم الشخص">
        <input type="text" id="family" placeholder="اسم العائلة">
        <input type="text" id="country" placeholder="اسم البلد">
    </div>

    <div class="preview-box">
        <canvas id="previewCanvas"></canvas>
    </div>

    <button class="downloadBtn" onclick="downloadImage()">⬇ تحميل الصورة</button>
</div>

<script>
    const imageUrl = "https://raw.githubusercontent.com/mohamednasr5/go/3d100521b8c46af4401f419ab0239fa7210fa3b3/11.png";

    let bg = null;

    function loadImage() {
        let img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = () => { bg = img; update(); };
        img.onerror = () => { console.log("خطأ في تحميل الصورة"); update(); };
        img.src = imageUrl;
    }
    loadImage();

    const rectX = 180;
    const rectY = 40;
    const rectW = 500;
    const rectH = 140;

    function update() {
        const name = document.getElementById("name").value || "";
        const family = document.getElementById("family").value || "";
        const country = document.getElementById("country").value || "";

        const canvas = document.getElementById("previewCanvas");
        const ctx = canvas.getContext("2d");

        canvas.width = 900;
        canvas.height = 600;

        if (bg) ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);

        // النصوص
        const lines = [
            name,
            `وعائلتي ${family}`,
            `من ${country}`
        ];

        ctx.fillStyle = "#000";
        ctx.font = "bold 32px Arial";
        ctx.textAlign = "center";

        const centerX = rectX + rectW / 2;

        // توزيع الـ 3 أسطر داخل المستطيل بالتساوي
        const totalLines = lines.length;
        const lineHeight = rectH / (totalLines + 1);

        for (let i = 0; i < totalLines; i++) {
            let y = rectY + lineHeight * (i + 1);
            ctx.fillText(lines[i], centerX, y);
        }
    }

    function downloadImage() {
        const canvas = document.getElementById("previewCanvas");
        const link = document.createElement("a");
        link.download = "mohamed hammad.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
    }

    document.getElementById("name").addEventListener("input", update);
    document.getElementById("family").addEventListener("input", update);
    document.getElementById("country").addEventListener("input", update);

</script>

</body>
</html>
